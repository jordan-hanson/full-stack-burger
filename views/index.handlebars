<h1>Make and Eat Da Burger</h1>
<form class="newForm">
    <input id="burger_name"></input>
    <button id="burgerbutton">save burger</button>
</form>
<ul>
    {{#each burgers}}
    {{#unless devoured}}
    <li>{{id}}{{burger_name}}{{devoured}}</li>
    <button class="devoured" value="0" name="{{id}}">Devour</button>
    {{/unless}}
    {{/each}}
</ul>

<h2>Burgers Devoured!</h2>

<ul>
    {{#each burgers}}
    {{#if devoured}}
    <li>{{id}}{{burger_name}}{{devoured}}</li>
    <button class="devoured" value="0" name="{{id}}">Devour</button>
    {{/if}}
    {{/each}}
</ul>

<script>
    $("#burgerbutton").on('click', function () {
        event.preventDefault();


        var newBurger = {
            burger_name: $("#burger_name").val(),
            devoured: false,
        }

        $.ajax({
            url: "/api/burgers",
            type: "POST",
            data: newBurger
        }).then(function (data) {
            location.reload()
            console.log("new burger", data)
        })
    });

    $(".devoured").on("click", function () {
        event.preventDefault();

        var id = 3

        var devouredBurger = {
            devoured: true,
        };

        console.log("this is the id ", $(this).attr("name"))
        $.ajax({
            url: "/api/burgers/" + $(this).attr("name"),
            type: "PUT",
            data: devouredBurger
        }).then(function () {
            location.reload();

            console.log("it is devoured", devoured)
        })
    })

</script>